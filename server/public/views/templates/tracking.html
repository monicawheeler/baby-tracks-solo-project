<header class="header" ng-include="'/views/partials/user-header.html'"></header>

<div class="track-wrapper view-wrapper fade">
    <h2 class="input-alert alert-message" role="alert" ng-if="vm.message != ''">{{vm.message}}</h2>
    <div class="select-header">
        <div class="select-wrapper" ng-if="vm.childList.list.length > 0">
            <h2 class="subtitle">Select a child to track:</h2>
            <div class="input-row input-row-select">
                <select class="select input" ng-change="vm.getChildEventList(vm.trackChild.id); vm.showEventHistory = true; vm.showChildTracking = true; vm.showAllButtons(vm.trackChild.id); vm.showEventColumns = true;" ng-model="vm.trackChild" ng-options="child as child.first_name for child in vm.childList.list">
                    <option value="" selected disabled>Select a Child</option>
                </select>
                <div class="arrow">
                    <i class="fas fa-angle-down"></i>
                </div>
            </div>
        </div>
        <div class="child-selected-wrapper" ng-if="vm.showChildTracking">
            <img class="child-image" ng-src="styles/assets/images/baby-{{vm.trackChild.gender}}.svg" alt="">
            <div class="inner-subtitle-child">
                <p class="super-title">Currently Tracking:</p>
                {{vm.trackChild.first_name}}
                <div class="inner-subtitle-small">Born: {{vm.trackChild.dob | date: MM/dd/YYYY}}</div>
            </div>
        </div>
    </div>
    <div class="select-header-no-children" ng-if="vm.childList.list.length === 0">
        <a class="btn btn-alt" href="#!manage-children">Manage Children</a>
    </div>
    <div class="events-wrapper" ng-if="vm.showEventColumns">
        <div class="event-row">
            <img ng-if="vm.showFeedingTrackingButton" class="category-image" ng-src="styles/assets/images/feeding.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewFeedingEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Feeding Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.feedingNotes, 1, date); vm.showNewFeedingEvent = false; vm.showFeedingTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewFeedingNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.feedingNotes" ng-if="vm.showNewFeedingNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewFeedingNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.feedingNotes, 1, date); vm.showNewFeedingNotes = false; vm.showFeedingTrackingButton = true; vm.showNewFeedingEvent = false;">Log This Feeding</button>
                    <button class="btn btn-warn" ng-click="vm.showNewFeedingEvent = false; vm.showFeedingTrackingButton = true;">Opps! Do Not Log This Feeding</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showFeedingTrackingButton" ng-click="vm.showNewFeedingEvent = true;">Track New Feeding</button>
                <div class="event-content-body" ng-repeat="feeding in vm.categoryFeeding.list">
                    <h2 class="event-header">{{feeding.category_name}}</h2>
                    <p>Last fed: {{feeding.datetime | date:'h:mm a'}} <!--({{vm.feedingTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{feeding.notes}}</p> <strong ng-click="vm.editFeedingNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editFeedingNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.feedingNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(feeding.id, vm.feedingNotesContent, vm.trackChild.id); vm.editFeedingNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editFeedingNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->
        <div class="event-row">
            <img ng-if="vm.showSleepingTrackingButton" class="category-image" ng-src="styles/assets/images/sleeping.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewSleepingEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Sleeping Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.sleepingNotes, 2, date); vm.showNewSleepingEvent = false; vm.showSleepingTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewSleepingNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.sleepingNotes" ng-if="vm.showNewSleepingNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewSleepingNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.sleepingNotes, 2, date); vm.showNewSleepingNotes = false; vm.showSleepingTrackingButton = true; vm.showNewSleepingEvent = false;">Log This Sleeping</button>
                    <button class="btn btn-warn" ng-click="vm.showNewSleepingEvent = false; vm.showSleepingTrackingButton = true;">Opps! Do Not Log This Sleeping</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showSleepingTrackingButton" ng-click="vm.showNewSleepingEvent = true;">Track New Sleeping</button>
                <div class="event-content-body" ng-repeat="sleeping in vm.categorySleeping.list">
                    <h2 class="event-header">{{sleeping.category_name}}</h2>
                    <p>Last slept: {{sleeping.datetime | date:'h:mm a'}} <!--({{vm.sleepingTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{sleeping.notes}}</p> <strong ng-click="vm.editSleepingNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editSleepingNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.sleepingNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(sleeping.id, vm.sleepingNotesContent, vm.trackChild.id); vm.editSleepingNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editSleepingNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->
        <div class="event-row">
            <img ng-if="vm.showDiaperingTrackingButton" class="category-image" ng-src="styles/assets/images/diapering.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewDiaperingEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Diapering Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.diaperingNotes, 3, date); vm.showNewDiaperingEvent = false; vm.showDiaperingTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewDiaperingNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.diaperingNotes" ng-if="vm.showNewDiaperingNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewDiaperingNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.diaperingNotes, 3, date); vm.showNewDiaperingNotes = false; vm.showDiaperingTrackingButton = true; vm.showNewDiaperingEvent = false;">Log This Diapering</button>
                    <button class="btn btn-warn" ng-click="vm.showNewDiaperingEvent = false; vm.showDiaperingTrackingButton = true;">Opps! Do Not Log This Diapering</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showDiaperingTrackingButton" ng-click="vm.showNewDiaperingEvent = true;">Track New Diapering</button>
                <div class="event-content-body" ng-repeat="diapering in vm.categoryDiapering.list">
                    <h2 class="event-header">{{diapering.category_name}}</h2>
                    <p>Last diaper: {{diapering.datetime | date:'h:mm a'}} <!--({{vm.diaperingTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{diapering.notes}}</p> <strong ng-click="vm.editDiaperingNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editDiaperingNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.diaperingNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(diapering.id, vm.diaperingNotesContent, vm.trackChild.id); vm.editDiaperingNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editDiaperingNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->

        <div class="event-row">
            <img ng-if="vm.showBathingTrackingButton" class="category-image" ng-src="styles/assets/images/bathing.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewBathingEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Bathing Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.bathingNotes, 6, date); vm.showNewBathingEvent = false; vm.showBathingTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewBathingNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.bathingNotes" ng-if="vm.showNewBathingNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewBathingNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.bathingNotes, 6, date); vm.showNewBathingNotes = false; vm.showBathingTrackingButton = true; vm.showNewBathingEvent = false;">Log This Bathing</button>
                    <button class="btn btn-warn" ng-click="vm.showNewBathingEvent = false; vm.showBathingTrackingButton = true;">Opps! Do Not Log This Bathing</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showBathingTrackingButton" ng-click="vm.showNewBathingEvent = true;">Track New Bathing</button>
                <div class="event-content-body" ng-repeat="bathing in vm.categoryBathing.list">
                    <h2 class="event-header">{{bathing.category_name}}</h2>
                    <p>Last bath: {{bathing.datetime | date:'h:mm a'}} <!--({{vm.bathingTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{bathing.notes}}</p> <strong ng-click="vm.editBathingNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editBathingNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.bathingNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(bathing.id, vm.bathingNotesContent, vm.trackChild.id); vm.editBathingNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editBathingNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->

        <div class="event-row">
            <img class="category-image" ng-if="vm.showMedicationTrackingButton" ng-src="styles/assets/images/medication.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewMedicationEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Medication Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.medicationNotes, 7, date); vm.showNewMedicationEvent = false; vm.showMedicationTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewMedicationNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.medicationNotes" ng-if="vm.showNewMedicationNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewMedicationNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.medicationNotes, 7, date); vm.showNewMedicationNotes = false; vm.showMedicationTrackingButton = true; vm.showNewMedicationEvent = false;">Log This Medication</button>
                    <button class="btn btn-warn" ng-click="vm.showNewMedicationEvent = false; vm.showMedicationTrackingButton = true;">Opps! Do Not Log This Medication</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showMedicationTrackingButton" ng-click="vm.showNewMedicationEvent = true; ">Track New Medication</button>
                <div class="event-content-body" ng-repeat="medication in vm.categoryMedication.list">
                    <h2 class="event-header">{{medication.category_name}}</h2>
                    <p>Last medication: {{medication.datetime | date:'h:mm a'}} <!--({{vm.medicationTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{medication.notes}}</p> <strong ng-click="vm.editMedicationNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editMedicationNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.medicationNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(medication.id, vm.medicationNotesContent, vm.trackChild.id); vm.editMedicationNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editMedicationNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->
        <div class="event-row">
            <img class="category-image" ng-if="vm.showOtherTrackingButton" ng-src="styles/assets/images/other.svg" alt="">
            <div class="new-event fade" ng-if="vm.showNewOtherEvent">
                <div class="new-event-inner">
                    <h2 class="new-event-header">Track More Other Information?</h2>
                    <div class="event-button-wrapper">
                        <p class="event-btn event-btn-no" ng-click="vm.trackEvent(vm.trackChild.id, vm.otherNotes, 8, date); vm.showNewOtherEvent = false; vm.showOtherTrackingButton = true;">No, track this event without notes</p>
                        <p class="event-btn event-btn-yes" ng-click="vm.showNewOtherNotes = true">Yes, more info!</p>
                    </div>
                    <textarea class="new-event-notes event-notes" cols="20" rows="5" placeholder="Optional notes" ng-model="vm.otherNotes" ng-if="vm.showNewOtherNotes"></textarea>
                    <button class="btn btn-alt" ng-if="vm.showNewOtherNotes" ng-click="vm.trackEvent(vm.trackChild.id, vm.otherNotes, 8, date); vm.showNewOtherNotes = false; vm.showOtherTrackingButton = true; vm.showNewOtherEvent = false;">Log This Event</button>
                    <button class="btn btn-warn" ng-click="vm.showNewOtherEvent = false; vm.showOtherTrackingButton = true;">Opps! Do Not Log This Event</button>
                </div>
            </div>
            <div class="event-content">
                <button class="btn btn-alt event-content-btn" ng-if="vm.showOtherTrackingButton" ng-click="vm.showNewOtherEvent = true; ">Track New Other Event</button>
                <div class="event-content-body" ng-repeat="other in vm.categoryOther.list">
                    <h2 class="event-header">{{other.category_name}}</h2>
                    <p>Last other: {{other.datetime | date:'h:mm a'}} <!--({{vm.otherTimeDifferenceInHours}} hours ago) --></p>
                    <p class="notes-title">Notes: <p class="notes-content">{{other.notes}}</p> <strong ng-click="vm.editOtherNotes = true" class="edit-btn"><i class="fas fa-edit"></i> Edit Notes </strong></p>
                    <div class="update-notes" ng-if="vm.editOtherNotes">
                        <div class="update-notes-inner">
                            <h2 class="update-notes-header">Update Notes</h2>
                            <textarea class="event-notes" cols="20" rows="5" ng-model="vm.otherNotesContent" placeholder="Update current notes"></textarea>
                            <button class="btn btn-alt" ng-click="vm.updateNotes(other.id, vm.otherNotesContent, vm.trackChild.id); vm.editOtherNotes = false;">Update Notes</button>
                            <button class="btn btn-warn" ng-click="vm.editOtherNotes = false">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- .event-row -->
    </div>
<div class="event-history" ng-if="vm.showEventHistory && vm.childEvents.list.length > 0">
    <h2 class="subtitle">History</h2>
    <table class="event-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Notes</th>
                <th>Category</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="childEvent in vm.childEvents.list">
                <td>{{childEvent.datetime | date: MM/dd/YYYY}}</td>
                <td>{{childEvent.datetime | date:'h:mm a'}}</td>
                <td>{{childEvent.notes}}</td>
                <td>{{childEvent.category_name}}</td>
            </tr>
        </tbody>
    </table>
</div><!-- .event-history -->
</div> <!-- .track-wrapper -->

